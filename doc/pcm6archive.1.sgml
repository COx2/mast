<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">

<refentry>
<refmeta>
<refentrytitle>pcm6archive</refentrytitle>
<manvolnum>1</manvolnum>
</refmeta>
<refnamediv>
    <refname>pcm6archive</refname>
    <refpurpose>records PCM audio multicast stream to MP3 file</refpurpose>
</refnamediv>
<refsynopsisdiv>
<simpara>
<emphasis>pcm6archive</emphasis> [-t duration] [-b bitrate] [-p payload]
        [-m] [-d] &lt;multicast group&gt;/&lt;port&gt; &lt;filename&gt;
</simpara>

</refsynopsisdiv>
<refsect1>
<title>DESCRIPTION</title>
<simpara>
pcm6archive(1) is a perl script which listens to a multicast
PCM audio stream (using a pcm6client(1) process) and encodes
the audio to an MPEG Audio file <emphasis>filename</emphasis> using lame(1).
</simpara>

<simpara>
You must specify the <emphasis>payload</emphasis> type number expected to be received
on the multicast stream. This is so that lame(1) can be initialized
with the correct audio parameters.
</simpara>

</refsect1>
<refsect1>
<title>OPTIONS</title>
<variablelist>
<varlistentry>
<term>
-h
</term>
<listitem>
<simpara>
        Return usage and version information.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-t
</term>
<listitem>
<simpara>
        Duration in seconds to record for. Defaults to 0, which records
        indefinitely, until stopped by user.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-b
</term>
<listitem>
<simpara>
        Bitrate of recording in <emphasis>kbps</emphasis>. Default bitrate is 16kbps for payloads
        0 and 8, 128kbps for payload 10 and 64kbps for payload 11.
        See lame --longhelp for a list of valid bitrates.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-p
</term>
<listitem>
<simpara>
        Payload of the multicast stream. If this payload type is not
        received then recording is aborted. Default expected payload is 10.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-m
</term>
<listitem>
<simpara>
        Downmix the recorded stream to mono.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-d
</term>
<listitem>
<simpara>
        Directory mode. Uses filenames in the form YYYY-MM-DD-HH.mp3 and stores
        them in directory specified using the normal <emphasis>filename</emphasis> option on the
        command line. Also sets the duration <emphasis>-t</emphasis> to 3600 seconds (1 hour).
        This option works well when running pcm6archive hourly using cron(8).
</simpara>
</listitem>
</varlistentry>
</variablelist>
</refsect1>
<refsect1>
<title>TODO</title>
<itemizedlist>
<listitem>
<simpara>
Option to archive to Ogg file using oggenc
</simpara>
</listitem>
<listitem>
<simpara>
Start recording timer when pcm6client actually gets a packet
</simpara>
</listitem>
<listitem>
<simpara>
More accurate timing than alarm() ?
</simpara>
</listitem>
<listitem>
<simpara>
Check for pcm6client and lame without which
</simpara>
</listitem>
<listitem>
<simpara>
Automatic detection of payload type
</simpara>
</listitem>
</itemizedlist>
</refsect1>
<refsect1>
<title>AUTHOR</title>
<simpara>
Written by Nicholas J. Humfrey, &lt;njh@ecs.soton.ac.uk&gt;
</simpara>

</refsect1>
<refsect1>
<title>RESOURCES</title>
<simpara>
Main web site: http://www.ecs.soton.ac.uk/~njh/pcm6cast/
</simpara>

</refsect1>
<refsect1>
<title>SEE ALSO</title>
<simpara>
pcm6client(1), pcm6cast(1), lame(1)
</simpara>

</refsect1>
<refsect1>
<title>COPYING</title>
<simpara>
Copyright (C) 2003,2004 University of Southampton. Free use of this software is
granted under the terms of the GNU Lesser General Public License (LGPL)
</simpara>

</refsect1>
</refentry>
