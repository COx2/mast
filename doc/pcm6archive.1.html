<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<meta name="generator" content="AsciiDoc 5.0.8"/>
<meta name="author" content="Nicholas J. Humfrey"/>
<meta name="author-email" content="njh@ecs.soton.ac.uk"/>
<title>pcm6archive</title>
</head>
<body>
<hr/>
<h1>
    PCM6ARCHIVE(1) Manual Page
</h1>
<hr/>
<h2>NAME</h2>
<p>pcm6archive -
   records PCM audio multicast stream to MP3 file
</p>
<h2>SYNOPSIS</h2>
<p>
<b>pcm6archive</b> [-t duration] [-b bitrate] [-p payload]
        [-m] [-d] &lt;multicast group&gt;/&lt;port&gt; &lt;filename&gt;
</p>
<h2>DESCRIPTION</h2>
<p>
pcm6archive(1) is a perl script which listens to a multicast
PCM audio stream (using a pcm6client(1) process) and encodes
the audio to an MPEG Audio file <b>filename</b> using lame(1).
</p>
<p>
You must specify the <b>payload</b> type number expected to be received
on the multicast stream. This is so that lame(1) can be initialized
with the correct audio parameters.
</p>
<h2>OPTIONS</h2>
<dl>
<dt><b>
-h
</b></dt>
<dd>
<p>
        Return usage and version information.
</p>
</dd>
<dt><b>
-t
</b></dt>
<dd>
<p>
        Duration in seconds to record for. Defaults to 0, which records
        indefinitely, until stopped by user.
</p>
</dd>
<dt><b>
-b
</b></dt>
<dd>
<p>
        Bitrate of recording in <b>kbps</b>. Default bitrate is 16kbps for payloads
        0 and 8, 128kbps for payload 10 and 64kbps for payload 11.
        See lame --longhelp for a list of valid bitrates.
</p>
</dd>
<dt><b>
-p
</b></dt>
<dd>
<p>
        Payload of the multicast stream. If this payload type is not
        received then recording is aborted. Default expected payload is 10.
</p>
</dd>
<dt><b>
-m
</b></dt>
<dd>
<p>
        Downmix the recorded stream to mono.
</p>
</dd>
<dt><b>
-d
</b></dt>
<dd>
<p>
        Directory mode. Uses filenames in the form YYYY-MM-DD-HH.mp3 and stores
        them in directory specified using the normal <b>filename</b> option on the
        command line. Also sets the duration <b>-t</b> to 3600 seconds (1 hour).
        This option works well when running pcm6archive hourly using cron(8).
</p>
</dd>
</dl>
<h2>TODO</h2>
<ul>
<li>
<p>
Option to archive to Ogg file using oggenc
</p>
</li>
<li>
<p>
Start recording timer when pcm6client actually gets a packet
</p>
</li>
<li>
<p>
More accurate timing than alarm() ?
</p>
</li>
<li>
<p>
Check for pcm6client and lame without which
</p>
</li>
<li>
<p>
Automatic detection of payload type
</p>
</li>
</ul>
<h2>AUTHOR</h2>
<p>
Written by Nicholas J. Humfrey, &lt;njh@ecs.soton.ac.uk&gt;
</p>
<h2>RESOURCES</h2>
<p>
Main web site: http://www.ecs.soton.ac.uk/~njh/pcm6cast/
</p>
<h2>SEE ALSO</h2>
<p>
pcm6client(1), pcm6cast(1), lame(1)
</p>
<h2>COPYING</h2>
<p>
Copyright &copy; 2003,2004 University of Southampton. Free use of this software is
granted under the terms of the GNU Lesser General Public License (LGPL)
</p>
<p></p>
<p></p>
<hr/><p><small>
Version 0.4<br/>
Last updated 19-May-2004 10:57:48 BST
</small></p>
</body>
</html>
